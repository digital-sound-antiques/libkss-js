<html>
<head>
</head>
<body style="background: transparent;">
    <script src="scripts/docstrap.lib.js"></script>
    <script src="scripts/lunr.min.js"></script>
    <script src="scripts/fulltext-search.js"></script>

    <script type="text/x-docstrap-searchdb">
    {"classes.list.html":{"id":"classes.list.html","title":"Classes","body":" libkss-js Classes KSSKSSPlay Classes Classes KSS KSSPlay × Search results Close Documentation generated by JSDoc 3.6.11 using the DocStrap template. "},"index.html":{"id":"index.html","title":"Index","body":" libkss-js Classes KSSKSSPlay libkss-js Breaking Changes on 1.4.0 KSS.loadFromUrl(url) is removed in order to eliminate dependence on fetch API. Use the following code instead if required. async function loadKSSFromUrl(url) { const res = await fetch(url); const ab = await res.arrayBuffer(); return KSS.createUniqueInstance(new Uint8Array(ab), url); } Breaking Changes on 1.3.0 KSSPlay.initialize() must be called with await before using KSSPlay. Install npm install --save libkss-js Usage const { KSS, KSSPlay } = require('libkss-js'); const { WaveFile } = require('wavefile'); const fs = require('fs'); async function loadKSSFromUrl(url) { const res = await fetch(url); const ab = await res.arrayBuffer(); return KSS.createUniqueInstance(new Uint8Array(ab), url); } async function main() { await KSSPlay.initialize(); // must be called before using KSSPlay. const RATE = 44100; const kssplay = new KSSPlay(RATE); const kss = await KSS.loadFromUrl('https://digital-sound-antiques.github.io/msxplay-js/demo/grider.mgs'); kssplay.setData(kss); kssplay.reset(); const samples = kssplay.calc(RATE * 30); // Generate 30 seconds const wav = new WaveFile(); wav.fromScratch(1, RATE, '16', samples); fs.writeFileSync('test.wav', wav.toBuffer()); kssplay.release(); kss.release(); } main(); How to Build To build libkss.js, Emscripten 2.0.0 or greater is required. The latest tested version is 3.1.21. emcmake and cmake with some proper C compiler is required before npm install. git clone --recursive https://github.com/digital-sound-antiques/libkss-js.git cd libkss-js npm install npm run build API Document https://digital-sound-antiques.github.io/libkss-js/ × Search results Close Documentation generated by JSDoc 3.6.11 using the DocStrap template. "},"KSS.html":{"id":"KSS.html","title":"Class: KSS","body":" libkss-js Classes KSSKSSPlay Class: KSS KSS new KSS(data, filename [, song]) Create a new KSS object. Parameters: Name Type Argument Default Description data UInt8Array the KSS file binary. filename string the name of the KSS file (used only for determine file type). song number &lt;optional&gt; 0 internal song index. (0 to 255) Methods &lt;static&gt; createUniqueInstance(data, filename [, song]) Create a unique KSS object. If the same data is given, this function returns the same KSS instance. Parameters: Name Type Argument Default Description data UInt8Array the KSS file binary. filename string the name of the KSS file. song number &lt;optional&gt; 0 internal song index. Returns: A KSS instance. &lt;static&gt; releaseAll() Destory all the cached KSS instances that generated from this library. getTitle() get title string of the KSS file. This function assumes the title string of KSS is simple ASCII or SJIS encoded. Returns: The title string if exists. release() Release the object. Without calling this method will cause memory-leak. toVGM() Convert KSS to VGM Parameters: Name Type Description options.duration number maximum play time in milliseconds (default: 300000) options.song number song number (default: 0) options.loop number maximum loop count (default: 2) options.volume number VGM volume multiplier (default: 0) Returns: A Uint8Array that contains VGM data. × Search results Close Documentation generated by JSDoc 3.6.11 using the DocStrap template. "},"KSSPlay.html":{"id":"KSSPlay.html","title":"Class: KSSPlay","body":" libkss-js Classes KSSKSSPlay Class: KSSPlay KSSPlay new KSSPlay( [rate]) Create a new KSS player instance. Parameters: Name Type Argument Default Description rate number &lt;optional&gt; 44100 The audio playback rate. Methods &lt;static&gt; _free( [ptr]) Delegate of the free function on the emscripten heap. Parameters: Name Type Argument Description ptr number &lt;optional&gt; The pointer to the allocated buffer. &lt;static&gt; _malloc( [size]) Delegate of the malloc function on the emscripten heap. Parameters: Name Type Argument Description size number &lt;optional&gt; Returns: The pointer to the allocated buffer. Type number &lt;static&gt; initialize() Initialize library. Must be called with await before using KSS and KSSPlay classes. Returns: a Promise object. &lt;static&gt; toInt16Array( [ptr] [, size]) Make Int16Array from the pointer of the allocated memory on emuscripten heap. Parameters: Name Type Argument Description ptr number &lt;optional&gt; The pointer to the allocated buffer. size number &lt;optional&gt; The size of Int16Array. Returns: Type Int16Array calc(samples) Calculate specified length of wave samples. Parameters: Name Type Description samples number The number of samples to render. Returns: The generated samples. Type Int16Array calcSilent(samples) Calculate specified length without rendering wave. Parameters: Name Type Description samples number The number of samples to calculate. calcToBuffer(buffer, samples) Parameters: Name Type Description buffer number The pointer to the sample buffer. samples number The number of samples to render. fadeStart(duration) Starts the fade-out. Parameters: Name Type Description duration number fade-out duration in millis. getFadeFlag() Get progress of the fading-out. Returns: 0: Not started, 1: In progress, 3: Completed. getLoopCount() Get the number of loops of the current playing music. Returns: The number of the current loop counts. getMGSJumpCount() Get MGSDRV's MIB.JUMPCT Returns: value of MIB.JUMPCT getStopFlag() Check the player is stopped or not. Returns: 0: not stopped, 1: stopped. release() Release the object. Without calling this method will cause memory-leak. reset( [song] [, cpuSpeed]) Resets the player. Parameters: Name Type Argument Default Description song number &lt;optional&gt; 0|null The song number to play. If null, song index stored in KSS object is used. cpuSpeed number &lt;optional&gt; 0 0:AUTO, 1:3.58MHz 2:5.38MHz 3:7.16MHz 4:14.32MHz 5:28.64MHz setData(kss) Set the kss object for playing. Parameters: Name Type Description kss KSS kss instance. setDeviceQuality(config) Specify the playback quality of the devices. Parameters: Name Type Description config Object Properties Name Type Argument Description psg number &lt;optional&gt; 0:low 1:high scc number &lt;optional&gt; 0:low 1:high opll number &lt;optional&gt; 0:low 1:high opl number &lt;optional&gt; 0:low 1:high setIOWriteHandler(callback) Set I/O write handler Parameters: Name Type Description callback KSSPlay~IOWriteHandler setMemWriteHandler(callback) Set memory write handler Parameters: Name Type Description callback KSSPlay~MemWriteHandler setRCF(r, c) Set RC low-pass filter params. Parameters: Name Type Description r number Registor (OM) c number Capacitor (nF) setSilentLimit(time) Set the limit of the slient length. The player automatically stops if it detects silent longer than this limit. Parameters: Name Type Description time number maximum silent span in millis. Type Definitions IOWriteHandler(context, adr, data) Parameters: Name Type Description context KSSPlay adr number data number MemWriteHandler(context, adr, data) Parameters: Name Type Description context KSSPlay adr number data number × Search results Close Documentation generated by JSDoc 3.6.11 using the DocStrap template. "}}
    </script>

    <script type="text/javascript">
        $(document).ready(function() {
            Searcher.init();
        });

        $(window).on("message", function(msg) {
            var msgData = msg.originalEvent.data;

            if (msgData.msgid != "docstrap.quicksearch.start") {
                return;
            }

            var results = Searcher.search(msgData.searchTerms);

            window.parent.postMessage({"results": results, "msgid": "docstrap.quicksearch.done"}, "*");
        });
    </script>
</body>
</html>
